webpackJsonp([3],{"22O3":function(t,e,n){"use strict";var a=n("3cXf"),i=n.n(a),s=window.localStorage;e.a={set:function(t,e){void 0!==e&&s.setItem(t,function(t){return i()(t)}(e))},get:function(t,e){var n=function(t){if("string"!=typeof t)return;try{return JSON.parse(t)}catch(e){return t||void 0}}(s.getItem(t));return void 0===n?e:n},remove:function(t){s.removeItem(t)},clear:function(){s.clear()}}},"3cXf":function(t,e,n){t.exports={default:n("q1bu"),__esModule:!0}},AWzI:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("/l8+"),i=n("Fk3l"),s={name:"CategoryHeader",components:{MeNavbar:a.a,MeSearchBox:i.a},methods:{getQuery:function(t){console.log(t)},goToSearch:function(){this.$router.push("/search")}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("me-navbar",{staticClass:"header"},[n("me-search-box",{attrs:{slot:"center",placeholder:"开学季有礼，好货5折起",fake:""},on:{query:t.getQuery},nativeOn:{click:function(e){return t.goToSearch(e)}},slot:"center"}),t._v(" "),n("i",{staticClass:"iconfont iconxiaoxi",attrs:{slot:"right"},slot:"right"})],1)},staticRenderFns:[]};var o=n("C7Lr")(s,c,!1,function(t){n("CH2g")},"data-v-3cac756e",null).exports,r=n("rVsN"),l=n.n(r),d=n("8MDr"),u=n("odKQ"),m=n("fJiA"),f=n("Muz9"),h=n.n(f),v=n("EP3Z"),p=h.a.CancelToken,g=void 0,C=n("22O3"),b=[{name:"热门推荐",id:"WQR2006"},{name:"慕淘超市",id:"WQ1968"},{name:"国际名牌",id:"WQ1969"},{name:"奢侈品",id:"WQ1970"},{name:"全球购",id:"WQ1971"},{name:"男装",id:"WQ1972"},{name:"女装",id:"WQ1973"},{name:"男鞋",id:"WQ1974"},{name:"女鞋",id:"WQ1975"},{name:"内衣配饰",id:"WQ1976"},{name:"箱包手袋",id:"WQ1977"},{name:"美妆个护",id:"WQ1978"},{name:"钟表珠宝",id:"WQ1979"},{name:"手机数码",id:"WQ1980"},{name:"电脑办公",id:"WQ1981"},{name:"家用电器",id:"WQ1982"},{name:"食品生鲜",id:"WQ1983"},{name:"酒水饮料",id:"WQ1984"},{name:"母婴童鞋",id:"WQ1985"},{name:"玩具乐器",id:"WQ1986"},{name:"医药保健",id:"WQ1987"},{name:"计生情趣",id:"WQ1988"},{name:"运动户外",id:"WQ1989"},{name:"汽车用品",id:"WQ1990"},{name:"家居厨具",id:"WQ1991"},{name:"家具家装",id:"WQ1992"},{name:"礼品鲜花",id:"WQ1993"},{name:"宠物生活",id:"WQ1994"},{name:"生活旅行",id:"WQ1995"},{name:"图书音像",id:"WQ1996"},{name:"邮币",id:"WQ1997"},{name:"农资绿植",id:"WQ1998"},{name:"特产馆",id:"WQ1999"},{name:"慕淘金融",id:"WQ2000"},{name:"拍卖",id:"WQ2001"},{name:"房产",id:"WQ2008"},{name:"二手商品",id:"WQ2002"}],Q={name:"CategoryContent",components:{MeScroll:d.a,MeLoading:u.a,MeBacktop:m.a},props:{curId:{type:String,default:""}},data:function(){return{content:{},isBacktopVisible:!1,isLoading:!1}},watch:{curId:function(t){var e=this;this.isLoading=!0,this.getContent(t).then(function(){e.isLoading=!1,e.backToTop(0)})}},methods:{getContent:function(t){var e=this,n=C.a.get("mall-category-content-key"),a=void 0,i=(new Date).getTime();return n&&n[t]?(a=n[t].updateTime||0,i-a<=864e5?this.getContentByLocalStorage(n[t]):this.getContentByHTTP(t).then(function(){e.updateLocalStorage(n,t,i)})):this.getContentByHTTP(t).then(function(){e.updateLocalStorage(n,t,i)})},getContentByLocalStorage:function(t){return this.content=t.data,l.a.resolve()},getContentByHTTP:function(t){var e=this;return function(t){return g&&g("取消前一次请求!"),g=null,h.a.get("http://www.imooc.com/api/category/content/"+t,{timeout:v.c,cancelToken:new p(function(t){g=t})}).then(function(t){if(t.data.code===v.b)return t.data.content;throw new Error("没有成功获取数据！")}).catch(function(t){h.a.isCancel(t),console.log(t)})}(t).then(function(t){return new l.a(function(n){t&&(e.content=t,n())})})},updateLocalStorage:function(t,e,n){(t=t||{})[e]={},t[e].data=this.content,t[e].updateTime=n,C.a.set("mall-category-content-key",t)},backToTop:function(t){this.$refs.scroll&&this.$refs.scroll.scrollToTop(t)},updateScroll:function(){this.$refs.scroll&&this.$refs.scroll.update()},scrollEnd:function(t,e,n){this.isBacktopVisible=t<0&&-t>e.height}}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-wrapper"},[t.isLoading?n("div",{staticClass:"loading-container"},[n("div",{staticClass:"loading-wrapper"},[n("me-loading")],1)]):t._e(),t._v(" "),n("me-scroll",{ref:"scroll",on:{"scroll-end":t.scrollEnd}},[n("div",{staticClass:"content"},[t.content.banner?n("div",{staticClass:"pic"},[n("a",{staticClass:"pic-link",attrs:{href:t.content.banner.linkUrl}},[n("img",{staticClass:"pic-img",attrs:{src:t.content.banner.picUrl,alt:""},on:{load:t.updateScroll}})])]):t._e(),t._v(" "),t._l(t.content.data,function(e,a){return n("div",{key:a,staticClass:"section"},[n("h4",{staticClass:"section-title"},[t._v(t._s(e.name))]),t._v(" "),n("ul",{staticClass:"section-list"},t._l(e.itemList,function(e,a){return n("li",{key:a,staticClass:"section-item"},[n("a",{staticClass:"section-link",attrs:{href:""}},[e.picUrl?n("p",{staticClass:"section-pic"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.picUrl,expression:"item.picUrl"}],staticClass:"section-img",attrs:{alt:""}})]):t._e(),t._v(" "),n("p",{staticClass:"section-name"},[t._v(t._s(e.name))])])])}),0)])})],2)]),t._v(" "),n("div",{staticClass:"g-backtop-container"},[n("me-backtop",{attrs:{visible:t.isBacktopVisible},on:{backtop:t.backToTop}})],1)],1)},staticRenderFns:[]};var W=n("C7Lr")(Q,y,!1,function(t){n("vZ5s")},"data-v-223bccd1",null).exports,_={name:"CategoryTab",components:{MeScroll:d.a},data:function(){return{curId:""}},created:function(){this.init(),this.switchTab(this.items[0].id)},methods:{init:function(){this.items=b},switchTab:function(t){this.curId!==t&&(this.curId=t,this.$emit("swithch-tab",t))}}},k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("me-scroll",{attrs:{scrollbar:!1}},[n("ul",{staticClass:"tab"},t._l(t.items,function(e,a){return n("li",{key:a,staticClass:"tab-item",class:{"tab-item-active":e.id===t.curId},on:{click:function(n){return t.switchTab(e.id)}}},[t._v(t._s(e.name))])}),0)])},staticRenderFns:[]};var T={name:"category",components:{CategoryHeader:o,CategoryContent:W,CategoryTab:n("C7Lr")(_,k,!1,function(t){n("Ecvs")},"data-v-5c9adaef",null).exports},data:function(){return{curId:""}},methods:{getCurrentId:function(t){this.curId=t}}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"category"},[e("header",{staticClass:"g-header-container"},[e("category-header")],1),this._v(" "),e("div",{staticClass:"g-content-container"},[e("div",{staticClass:"sidebar"},[e("category-tab",{on:{"swithch-tab":this.getCurrentId}})],1),this._v(" "),e("div",{staticClass:"main"},[e("category-content",{attrs:{curId:this.curId}})],1)])])},staticRenderFns:[]};var S=n("C7Lr")(T,w,!1,function(t){n("Vd9m")},"data-v-9ab96984",null);e.default=S.exports},CH2g:function(t,e){},Ecvs:function(t,e){},Vd9m:function(t,e){},X6mT:function(t,e){},fJiA:function(t,e,n){"use strict";var a={mane:"MeBacktop",props:{visible:{type:Boolean,default:!1}},methods:{backToTop:function(){this.$emit("backtop")}}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"mine-backtop"}},[e("a",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"mine-backtop",attrs:{href:"javascript:;"},on:{click:this.backToTop}},[e("i",{staticClass:"iconfont iconfanhuidingbu"})])])},staticRenderFns:[]};var s=n("C7Lr")(a,i,!1,function(t){n("X6mT")},"data-v-5d1f9b74",null);e.a=s.exports},q1bu:function(t,e,n){var a=n("Rv9F"),i=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},vZ5s:function(t,e){}});
//# sourceMappingURL=3.8811b5abe30badb12866.js.map